<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Destructuring In JS</title>
  </head>

  <body>
    <h2>Destructing</h2>
    <p>
      Destructuring is a powerful feature in JavaScript that allows you to extract values from arrays or properties from
      objects and assign them to variables in a concise (mokhtaser) and readable way.
    </p>
    <p><b> Note: </b> Destructuring is not destructive. Destructuring does not change the original object.</p>
    <p><b>Khalid Usman</b></p>
    <script>
      // const abc = document.getElementById("lastId").innerHTML; // It returns all the tags and the text.
      // console.log(abc);
      // const xyz = document.getElementById("lastId").textContent; // It returns the text only and ignores the tags like <b> or anything else.
      // console.log(xyz);

      document.write(
        "<h3>Array Destructuring</h3>\
    <p>We can pick up array variables into our own variables.</p>\
   " + "<br>"
      );
      document.write("It can also unpack arrays and any other iterables:" + "<br>");
      // Create an Array
      const fruits = ["Bananas", "Oranges", "Apples", "Mangos"];
      // Destructuring
      let [fruit1, fruit2, fruit13, fruit14] = fruits;
      // Display Primitive Values
      document.write(fruit1 + " " + fruit13 + "<br>");

      document.write("When destructuring arrays, the order that variables are declared is important.", "<br>");
      // Create an Array
      const fruits2 = ["Bananas", "Oranges", "Apples", "Mangoes"];
      document.write(
        " <h3>Skipping Array Values</h3>\
    <p >We can skip array values using two or more commas.</p>\
    "
      );
      // Destructuring
      let [fruit0, , , fruit3] = fruits2;

      // Display Primitive Values
      document.write(fruit0 + " " + fruit3, "<br>");

      document.write(
        " <h3>Array Position Values</h3>\
    <p>We can pick up values from specific index locations of an array.</p>\
"
      );
      // Create an Array
      const fruits3 = ["Bananas", "Oranges", "Apples", "Mangos", "Avocado", "Blackberry"];

      const { [2]: fruit4, [4]: fruit5 } = fruits3;

      // Display Primitive Values
      document.write(fruit4 + " " + fruit5, "<br>");

      document.write(
        " <h3>The Rest Property</h3>\
    <p>You can end a destructuring syntax with a rest property. This syntax will store all remaining values into a new array:\
 </p>"
      );
      // Create an Array
      const numbers = [10, 20, 30, 40, 50, 60, 70];

      // Destructuring
      const [a, b, ...rest] = numbers;

      // Display the Values
      document.write("<p>a is " + a + "<p>b is " + b + "<p>the rest is " + rest + "<br>");

      document.write(" <h2> Array Destructuring for Swapping (adla badla) Variables </h2>" + "<br>");

      document.write(
        " This technique is called 'Array Destructuring for Swapping Variables'.It allows swapping variables in one line without using a temporary variable.\
                       Easy to read, clean, and efficient." + "<br>"
      );
      let firstNameIs = "Khalid ";
      let lastNameIs = " Usman";
      // Destructing
      [firstNameIs, lastNameIs] = [lastNameIs, firstNameIs];
      // Display the Values
      document.write(firstNameIs + " " + lastNameIs + "<br>");

      const myArray = [1, 2, 3, 4, 5];
      const [x, y, ...restArray] = myArray;
      document.write(`x is ${x} , y is ${y} and the rest is ${restArray}`, "<br>");

      document.write("<h2> Function Destructuring </h2>");
      document.write("Destructuring comes in handy when a function returns an array", "<br>");

      function calculate(a, b) {
        const add = a + b;
        const subtract = a - b;
        const multiply = a * b;
        const divide = a / b;

        return [add, subtract, multiply, divide];
      }

      const [add, subtract, multiply, divide] = calculate(10, 2);

      document.write(add + "<br>");
      document.write(subtract + "<br>");
      document.write(multiply + "<br>");
      document.write(divide + "<br>");

      // const vehicles = ['mustang', 'f-150', 'expedition'];
      //       // old way
      //       const a = vehicles[0];
      //       const b = vehicles[1];
      //       const  c = vehicles[2];

      // With destructuring ... new way
      // const vehicles = ['mustang', 'f-150', 'expedition'];
      // const [a, b, c] = vehicles;

      document.write("<h2> Destructuring Assignment Syntax</h2>");
      document.write("The destructuring assignment syntax unpack object properties into variables:" + "<br>");

      document.write(" <h2> Destructuring Objects </h2>");
      // Create an Object
      const principal = {
        hisname: "Khalid Usman ",
        hisage: 35,
        hiscolor: "white",
      };
      // Destructuring
      const { hisname, hisage, hiscolor } = principal; // The order of the properties does not matter: let {lastName, firstName} = person; Both orders are okay and they will show same result.
      document.write(hisname + " is " + hisage, "<br>");

      document.write("<b> OR </b> We can even do it with a function like the below", "<br>");
      const person = {
        Name: "Inayat",
        age: 25,
        Nationality: "Pakistani",
      };
      function myDetail({ Name, age, Nationality }) {
        document.write("My name is " + Name + " and I am " + Nationality);
      }
      myDetail(person + "<br>");

      document.write(
        "We can even destructure deeply nested objects by referencing the nested object then using a colon and curly braces to again destructure the items needed from the nested object:" +
          "<br>"
      );

      const vehicleOne = {
        brand: "Ford",
        Name: "Mustang",
        type: "car",
        year: 2021,
        color: "red",
        registration: {
          city: "Peshawar",
          state: "Khyber Pakhtunkhwa",
          country: "Pakistan",
        },
      };

      function myVehicle({ Name, registration: { state } }) {
        document.write("My " + Name + " is registered in " + state + ".");
      }
      // myVehicle(vehicleOne + "<br>"); // TypeError: Cannot read properties of undefined (reading 'state').. Problem: You are trying to concatenate an object (vehicleOne) with a string ("<br>"). This will cause an error because vehicleOne is not a string.
      myVehicle(vehicleOne, "<br>");

      document.write("<h2> Object Default Values </h2>");
      document.write("For potentially missing properties we can set default values", "<br>");

      const school = {
        schoolName: "NIPHS",
        students: 1500,
      };
      let { schoolName, students, sLocation = "Wana" } = school;
      document.write(schoolName + " is located in " + sLocation + "<br>");
      const parents = {
        father_Name: "Haji Shah Mir",
        Mother_Name: "Hajra Bibi",
        age: 40,
      };
      // Destructuring
      let { Mother_Name: herName } = parents;
      document.write(herName, "<br>");

      document.write("<h2> Object Property Alias </h2>");
      document.write(" Detail of Alias is below");
      document.write(" <h3>String Destructuring</h3>");
      let name = "W3Schools";
      // Destructuring
      let [a1, a2, a3, a4, a5] = name;
      // Display Value
      document.write(a4, "<br>");
      const [ab, ...restString] = name;
      document.write("The firs letter is " + ab + " and the remaining is " + restString);

      document.write("<h2> Destructuring Maps </h2>");

      // Create a Map
      const myFruits = new Map([
        ["apples ", 500],
        [" bananas ", 300],
        [" oranges ", 200],
      ]);
      // Destructing
      for (let [key, value] of myFruits) {
        document.write(key + " is " + value + "<br>");
      }
    </script>
  </body>
</html>
